# 05.1 - Dev/Test/Prod Workspace Strategy

## Overview

Dev/Test/Prod (Development, Testing, Production) workspace strategy establishes separate Power BI Service workspaces for different stages of the report lifecycle, preventing untested changes from reaching end users and enabling safe experimentation. This enterprise software development practice, standard in application development, is equally critical for Power BI deployments serving clinical workflows where report errors can disrupt patient care. A proper workspace strategy enables controlled testing, rollback capabilities, and clear separation between work-in-progress and production-ready content.

## Key Principles

- **Separate Workspaces for Each Environment**: Create distinct Power BI Service workspaces (Dev, Test, Prod) with different purposes, permissions, and data connections. Never develop directly in the Production workspace where end users access reports.

- **Progressive Promotion Through Environments**: Changes flow Dev ’ Test ’ Prod, with validation at each stage. A report must pass testing before production deployment. Never skip environments or promote untested content.

- **Environment-Specific Data Connections**: Each workspace connects to corresponding data sources (Dev database, Test database, Prod database). This prevents development queries from impacting production databases and enables realistic testing with production-like data.

- **Role-Based Access Control Across Environments**: Developers have Admin/Member access to Dev, Viewer access to Test/Prod. End users have Viewer access only to Prod. This prevents accidental changes and maintains environment integrity.

- **Deployment Pipelines Automate Promotion**: Power BI Deployment Pipelines (Premium feature) automate the Dev ’ Test ’ Prod promotion process, reducing manual errors and providing deployment history. For non-Premium organizations, manual promotion with documented procedures is required.

## Practical Example

### Example 1: Three-Environment Workspace Structure

**Workspace Naming Convention**:
```
Healthcare Analytics - Dev
Healthcare Analytics - Test
Healthcare Analytics - Prod
```

**Purpose of Each Environment**:

**Development Workspace** (`Healthcare Analytics - Dev`)
- **Purpose**: Active development, experimentation, breaking changes allowed
- **Users**: Developers (Admin/Member), Analytics Team Leads (Member)
- **Data Source**: Dev SQL Server database (`ABCDW-Dev`)
- **Refresh Schedule**: Manual refresh by developers (no scheduled refresh)
- **Content**: Work-in-progress reports, experimental measures, data model changes
- **SLA**: None (downtime acceptable)

**Test/UAT Workspace** (`Healthcare Analytics - Test`)
- **Purpose**: User acceptance testing, quality assurance, stakeholder review
- **Users**: Developers (Viewer), QA Team (Contributor), Business Stakeholders (Viewer)
- **Data Source**: Test SQL Server database (`ABCDW-Test` - copy of production data)
- **Refresh Schedule**: Daily at 7:00 AM (simulates production schedule)
- **Content**: Reports promoted from Dev, undergoing testing before production
- **SLA**: Moderate (should be available during business hours)

**Production Workspace** (`Healthcare Analytics - Prod`)
- **Purpose**: Live reports for end users, clinical workflows, business operations
- **Users**: Developers (Viewer), End Users (Viewer), Report Owners (Contributor for monitoring)
- **Data Source**: Production SQL Server database (`ABCDW-Prod`)
- **Refresh Schedule**: Daily at 6:00 AM (before business hours), critical reports may refresh hourly
- **Content**: Only fully tested, approved reports
- **SLA**: High (<5 second load times, 99.9% uptime during business hours)

**Workspace Settings Comparison**:

| Setting | Dev | Test | Prod |
|---------|-----|------|------|
| **Workspace Access** | Developers: Admin | Developers: Viewer<br>QA: Contributor | End Users: Viewer<br>Developers: Viewer |
| **Data Source** | Dev Database | Test Database (Prod copy) | Prod Database |
| **Scheduled Refresh** | Manual only | Daily 7 AM | Daily 6 AM (or hourly) |
| **Row-Level Security** | Disabled (all data visible) | Enabled (test RLS rules) | Enabled (production RLS) |
| **Premium Capacity** | No (Shared/Pro) | Optional | Yes (for performance SLA) |
| **Audit Logging** | Minimal | Standard | Full (compliance required) |

### Example 2: Promotion Workflow (Manual Process)

**Scenario**: Completed development of new "High Risk Patient Dashboard" ready for testing.

**Step 1: Validate in Development**
```
Dev Workspace Checklist:
 Data model loads without errors
 All measures calculate correctly (no BLANK or ERROR results)
 Performance Analyzer shows all visuals <2 seconds
 Filters work as expected (slicers, drill-through, cross-filtering)
 No unused tables or columns (model size optimized)
 Measure descriptions complete
 Report formatted for print (if applicable)
```

**Step 2: Promote to Test Environment**

**Option A: Manual Promotion (Non-Premium)**

1. **Export from Dev**:
   - In Dev workspace, open report
   - File ’ Download ’ .pbix file
   - Save as: `High_Risk_Patient_Dashboard_v1.2_Test.pbix`

2. **Update Data Source Connection**:
   - Open .pbix in Power BI Desktop
   - Transform Data ’ Data source settings
   - Change server: `ABCDW-Dev` ’ `ABCDW-Test`
   - Close & Apply

3. **Publish to Test**:
   - File ’ Publish ’ Select "Healthcare Analytics - Test" workspace
   - Configure refresh schedule (if not already set)
   - Configure RLS roles (test with different user contexts)

4. **Verify in Test**:
   - Open report in Test workspace
   - Verify data refreshed correctly
   - Check all visuals render properly
   - Test with different RLS roles (impersonate users)

**Option B: Deployment Pipeline (Premium)**

1. **Set Up Pipeline** (one-time):
   - In Power BI Service, go to Deployment Pipelines
   - Create New Pipeline: "Healthcare Analytics Pipeline"
   - Assign workspaces: Dev ’ Test ’ Prod

2. **Deploy Dev ’ Test**:
   - Open pipeline view
   - Select report: "High Risk Patient Dashboard"
   - Click "Deploy to Test"
   - Configure deployment rules (automatic data source swap)
   - Deployment completes in seconds

**Step 3: User Acceptance Testing**

Share Test workspace report with stakeholders:

```
UAT Test Plan:
 Provider stakeholder reviews dashboard for clinical accuracy
 QA team validates calculations match expected results
 Finance stakeholder confirms financial metrics align with source
 Test RLS with sample user accounts (different providers, facilities)
 Test on mobile devices (tablets, phones)
 Test print output (if dashboard used for huddles)
 Performance testing with concurrent users (5-10 simultaneous)
 Accessibility testing (screen reader, color contrast)

Sign-off Required:
- Clinical Lead: _______________
- Analytics Manager: _______________
```

**Step 4: Promote to Production** (after UAT approval)

**Option A: Manual**
- Repeat export/data source change/publish process
- Change data source: `ABCDW-Test` ’ `ABCDW-Prod`
- Publish to "Healthcare Analytics - Prod" workspace
- Schedule production refresh
- Verify first refresh completes successfully
- Communicate availability to end users

**Option B: Deployment Pipeline**
- Click "Deploy to Prod" in pipeline
- Deployment rules automatically update data source to Prod
- Monitor deployment completion
- Verify refresh and user access

**Step 5: Post-Deployment Validation**

```
Production Checklist:
 Data refresh completed successfully
 All visuals load within SLA (<5 seconds)
 RLS working correctly (test with user account impersonation)
 Report appears in end user app/workspace
 Mobile rendering correct
 Subscription emails delivering correctly (if configured)
 Usage metrics enabled for adoption tracking
```

### Example 3: Rollback Procedure

**Scenario**: New report version deployed to Prod has critical bug discovered by users.

**Immediate Rollback (Manual)**:

1. **Remove Buggy Report**:
   - In Prod workspace, locate report
   - Report settings ’ Delete (moves to Recycle Bin)
   - Or unpublish (remove from app if published via App)

2. **Republish Previous Version**:
   - Locate previous version file: `Report_v1.1_Prod.pbix` (version control critical!)
   - Open in Power BI Desktop
   - Verify data source still points to Prod
   - Publish ’ Healthcare Analytics - Prod (overwrites)

3. **Communicate to Users**:
   - Email stakeholders: "Issue identified in v1.2, reverted to v1.1"
   - Update Test environment to investigate bug

**Rollback with Deployment Pipeline**:
- Deployment Pipelines retain deployment history
- Can redeploy previous version from Test ’ Prod
- Faster than manual republish

**Root Cause Analysis**:
- Identify what wasn't caught in Test environment
- Update UAT test plan to prevent recurrence
- Fix bug in Dev, retest in Test, re-promote when ready

## Common Pitfalls

### L Pitfall 1: Developing Directly in Production

**Description**: Making changes to reports directly in the Production workspace because "it's faster" or "it's a small change."

**Impact**:
- Untested changes reach end users immediately (no validation)
- Breaking changes disrupt clinical workflows during business hours
- No rollback capability (previous version not saved)
- Difficult to reproduce issues (can't test in isolated environment)
- Assessment finding: AbsoluteCare lacked clear Dev/Test/Prod separation

**Fix**:
- Enforce rule: **Zero development in Production workspace**
- Developers have Viewer access to Prod (cannot edit)
- All changes start in Dev, flow through Test, then to Prod
- Even "quick fixes" follow the process (prevents production outages)

### L Pitfall 2: Using Same Data Source Across All Environments

**Description**: All three workspaces (Dev, Test, Prod) connecting to Production database.

**Impact**:
- Development queries hit production database (performance impact on live system)
- Can't test with experimental data without affecting production
- Test environment doesn't catch data source-specific issues (connection strings, permissions)
- Risk of accidental data modification if connection has write access

**Fix**:
- Maintain separate databases for each environment:
  - **Dev DB**: Subset of data, developers have full access for troubleshooting
  - **Test DB**: Full copy of production data (refreshed weekly/monthly), read-only access
  - **Prod DB**: Live data, read-only Power BI service account access only
- Use deployment rules or parameters to automatically swap connections during promotion

### L Pitfall 3: No Documentation or Promotion Checklist

**Description**: Informal promotion process ("I think I tested it, probably ready for prod").

**Impact**:
- Inconsistent quality (sometimes tested thoroughly, sometimes not)
- Missed steps (forgot to configure RLS, forgot to set refresh schedule)
- No audit trail of what was tested, when, by whom
- Can't reproduce deployment process for new developers

**Fix**:
Create documented promotion checklist (example in this topic) and require sign-off:

```markdown
## Promotion Checklist Template

**Report Name**: _____________
**Version**: _____________
**Promoted By**: _____________
**Date**: _____________

### Development Validation
- [ ] Data model loads without errors
- [ ] Performance: All visuals <2 seconds (Performance Analyzer)
- [ ] Measures: No ERROR or unexpected BLANK results
- [ ] Filters: Slicers, drill-through tested
- [ ] Print layout tested (if applicable)

### Test Environment Validation
- [ ] UAT completed by: _____________
- [ ] RLS tested with sample users
- [ ] Mobile rendering verified
- [ ] Calculations validated against source data
- [ ] Sign-off: Clinical Lead: _______ Analytics Manager: _______

### Production Deployment
- [ ] Data source connection updated to Prod
- [ ] Refresh schedule configured
- [ ] First refresh completed successfully
- [ ] User access granted (workspace/app permissions)
- [ ] Post-deployment validation complete

### Rollback Plan
- [ ] Previous version saved: `Report_vX.X_Prod.pbix`
- [ ] Rollback procedure documented
```

Store completed checklists in SharePoint or project documentation folder.

## Healthcare Context

### Performance Considerations

Environment strategy enables performance optimization:

**Realistic Performance Testing**: Test workspace with production-like data volumes reveals performance issues before reaching end users. A report that loads in 1 second with Dev database (1000 patients) might take 8 seconds with Prod database (100,000 patients).

**Safe Performance Tuning**: Developers can experiment with data model optimizations, DAX rewrites, and visual changes in Dev without impacting users. Performance Analyzer results in Test environment predict production performance.

### Print/Mobile Implications

**Cross-Device Testing in Test Environment**: Test workspace enables validation on multiple devices before production:
- Print test copies from Test workspace
- Install Power BI mobile app, connect to Test workspace
- Verify mobile layouts on tablets, phones
- Validate print subscriptions deliver correctly

**Production Environment Reliability**: End users depend on reports for daily huddles, clinical rounds. Production workspace must have highest reliability - no experimental features or untested changes.

### Compliance Notes

**HIPAA Audit Requirements**: Separate environments support compliance:
- **Dev**: Can use de-identified or synthetic data (no real PHI) for development
- **Test**: Production data copy with full PHI, access restricted to authorized testers
- **Prod**: Live PHI, full audit logging of access, Row-Level Security enforced

**Change Management Documentation**: Promotion checklists and deployment history provide audit trail for:
- Who deployed what changes when
- What testing was completed before production deployment
- Sign-off by authorized stakeholders

## Learn More

### Official Documentation
- [Deployment Pipelines in Power BI](https://learn.microsoft.com/en-us/power-bi/create-reports/deployment-pipelines-overview) - Microsoft guide to Premium deployment pipelines
- [Workspaces in Power BI Service](https://learn.microsoft.com/en-us/power-bi/collaborate-share/service-new-workspaces) - Creating and managing workspaces

### Expert Resources
- [Power BI Deployment Best Practices](https://powerbi.tips/2021/03/power-bi-deployment-best-practices/) - PowerBI.Tips guidance on environment strategy
- [Dev/Test/Prod for Power BI](https://www.sqlbi.com/articles/deployment-strategies/) - SQLBI article on deployment workflows

### Video Content
- [Power BI Deployment Pipelines Tutorial](https://www.youtube.com/c/GuyinaCube) - Guy in a Cube walkthrough of Premium deployment pipelines
- [Workspace Strategy for Enterprise](https://www.youtube.com/c/GuyinaCube) - Enterprise workspace organization patterns

### Related Topics
- [05.3 - Version Control for Power BI](05.3%20-%20Version%20Control%20for%20Power%20BI.md) - Git integration for .pbix files
- [06.3 - Deployment Pipelines & CI-CD](../06%20-%20Governance%20Security%20&%20Deployment/06.3%20-%20Deployment%20Pipelines%20&%20CI-CD.md) - Automated deployment strategies
- [06.2 - Workspace Roles & Permissions](../06%20-%20Governance%20Security%20&%20Deployment/06.2%20-%20Workspace%20Roles%20&%20Permissions.md) - Managing workspace access
- [05.4 - Testing & Change Management](05.4%20-%20Testing%20&%20Change%20Management.md) - Systematic testing approaches

---

*Last updated: October 2025*
